pipeline{
	agent any

	stages{
	

		stage ('Build Stage'){

			steps {
				withMaven(maven : 'Maven'){
					bat 'mvn clean install'
				}
			}
		}
		
		stage ('SonarQube Analysis'){
		
			steps{
			
				withSonarQubeEnv('sonarqube') {
				bat'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.2:sonar'

				}
			}
		}
		
		stage('LOG') {
      		     steps {
		     	     echo 'Hello, world!'
           		     logstashSend failBuild: true, maxLines: 1000
			     echo 'Bye, world!'
       			    }
			    }
		
		
	}
}
